<style>
{* Рекомендуется перенести эти правила в один из ваших .css файлов темы дизайна, чтобы избежать дублирования стилей *}
.flexdiscount-discounts { -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05); -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05); box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05); background-color: #FFFFFF; border: 1px solid #000; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; margin: 10px 0; border-color: #DDDDDD; }
.flexdiscount-heading { background: #163bdb; border-color: #DDDDDD; color: #333333; -webkit-border-top-left-radius: 3px; -moz-border-top-left-radius: 3px; border-top-left-radius: 3px; -webkit-border-top-right-radius: 3px; -moz-border-top-right-radius: 3px; border-top-right-radius: 3px; padding: 10px 15px;}
.flexdiscount-heading h3 { font-size: 16px; margin: 0; padding: 0; color: #fff;}
.flexdiscount-body { padding: 15px; }
.flexdiscount-table { border-left: 1px solid #000; border-top: 1px solid #000; width: 100%; }
.flexdiscount-table td, .flexdiscount-table th { border-right: 1px solid #000; border-bottom: 1px solid #000; padding: 5px; }
</style>

{if $discounts}
    {if !$view_type || $view_type == '1' || $view_type == '2' || $view_type == '3'}
    <div class='flexdiscount-discounts'>
        <div class="flexdiscount-heading">
            <h3>Действующие скидки</h3>
        </div>
        <div class="flexdiscount-body"> 
            <div class="align-center flexdiscount-loader">
                <i class='flexdiscount-big-loading'></i>
            </div>
            <div class='flexdiscount-interactive'>
            {if $view_type == '1' || !$view_type}
                <ul>
                 {foreach $discounts as $d}
                    <li>
                        {if $d.name}{$d.name|escape} -{/if} {$d.discount}
                    </li>
                 {/foreach}
                </ul>
            {elseif $view_type == '2'}
                <table class="flexdiscount-table align-center">
                    <thead>
                        <tr>
                            <th>Название скидки</th>
                            <th>Размер скидки</th>
                            <th>Размер скидки, %</th>
                            <th>Бонусные баллы</th>
                        </tr>
                    </thead>
                    <tbody>
                            {foreach $discounts as $d}
                            <tr>
                                <td>{$d.name|escape}</td>
                                <td>{$d.discount}</td>
                                <td>{$d.params.discount_percentage}</td>
                                <td>{$d.affiliate}</td>
                            </tr>
                            {/foreach}
                    </tbody>
                </table>
            {elseif $view_type == '3'}
                {$head = '<th>Название</th>'}
                {$body = '<td>Скидка</td>'}
                {foreach $discounts as $d}
                    {$head = "`$head`<th>{$d.name|escape}</th>"}
                    {$body = "`$body`<td>{$d.discount}</td>"}
                {/foreach}
                <table class="align-center flexdiscount-table" cellspacing="0" cellpadding="0">
                    <thead>
                        <tr>
                            {$head}
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            {$body}
                        </tr>
                    </tbody>
                </table>
            {/if}
            </div>
        </div>
    </div>
    {elseif $view_type == '4'}
        <div class="flexdiscount-body"> 
            <div class="align-center flexdiscount-loader">
                <i class='flexdiscount-big-loading'></i>
            </div>
            <div class='flexdiscount-interactive'>
                <table class="flexdiscount-table align-center">
                    {foreach $discounts as $d}
                        <tr>
                            <td>{$d.name|escape}</td>
                            <td>{$d.discount}</td>
                        </tr>
                    {/foreach}
                </table>
            </div>
        </div>
    {elseif $view_type == '5'}
        <div style='display: inline-block'> 
            <div class="align-center flexdiscount-loader">
                <i class='flexdiscount-big-loading'></i>
            </div>
            <div class='flexdiscount-interactive'>
                {if $workflow.discount}
                    Ваша скидка {$workflow.discount}
                {/if}
            </div>
        </div>
    {elseif $view_type == '6'}
        <div class="flexdiscount-body"> 
            <div class="align-center flexdiscount-loader">
                <i class='flexdiscount-big-loading'></i>
            </div>
            <div class='flexdiscount-interactive'>
                // ВАШ ТИП ОТОБРАЖЕНИЯ
            </div>
        </div>
    {/if}
{/if}